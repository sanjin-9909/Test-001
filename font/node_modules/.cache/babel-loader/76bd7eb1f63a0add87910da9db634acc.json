{"remainingRequest":"D:\\uu\\springboot+vue的果蔬大棚管理系统\\font\\node_modules\\babel-loader\\lib\\index.js!D:\\uu\\springboot+vue的果蔬大棚管理系统\\font\\src\\mixins\\WebsocketMixin.js","dependencies":[{"path":"D:\\uu\\springboot+vue的果蔬大棚管理系统\\font\\src\\mixins\\WebsocketMixin.js","mtime":1767581166000},{"path":"D:\\uu\\springboot+vue的果蔬大棚管理系统\\font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\uu\\springboot+vue的果蔬大棚管理系统\\font\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUvJzsKLy8gaW1wb3J0IHsgQUNDRVNTX1RPS0VOIH0gZnJvbSAnQC9zdG9yZS9tdXRhdGlvbi10eXBlcycKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgY29uZmlnIGZyb20gJ0AvY29uZmlnL2NvbmZpZyc7CmV4cG9ydCBjb25zdCBXZWJzb2NrZXRNaXhpbiA9IHsKICBtb3VudGVkKCkgewogICAgLy8gdGhpcy5pbml0V2ViU29ja2V0KCk7CiAgfSwKICBkZXN0cm95ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIC8vIOemu+W8gOmhtemdoueUn+WRveWRqOacn+WHveaVsAogICAgLy8gdGhpcy53ZWJzb2NrZXRPbmNsb3NlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0V2ViU29ja2V0KHRvSWQpIHsKICAgICAgLy8gbGV0IHRva2VuID0gVnVlLmxzLmdldChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZnJvbnRUb2tlbicpKQogICAgICAvLyBjb25zb2xlLmxvZygiLS0tLS0tLS0tLS0tV2ViU29ja2V06L+e5o6l5oiQ5YqfIik7CiAgICAgIC8vIFdlYlNvY2tldOS4juaZrumAmueahOivt+axguaJgOeUqOWNj+iuruacieaJgOS4jeWQjO+8jHdz562J5ZCM5LqOaHR0cO+8jHdzc+etieWQjOS6jmh0dHBzCiAgICAgIHZhciB1c2VySWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZnJvbnRVc2VyaWQnKTsKICAgICAgLy8gaWYoIXRoaXMuc29ja2V0VXJsLnN0YXJ0c1dpdGgoJy8nKSl7CiAgICAgIC8vICAgdGhpcy5zb2NrZXRVcmwgPSAnLycgKyB0aGlzLnNvY2tldFVybAogICAgICAvLyB9CiAgICAgIC8vIGlmKCF0aGlzLnNvY2tldFVybC5lbmRzV2l0aCgnLycpKXsKICAgICAgLy8gICB0aGlzLnNvY2tldFVybCA9IHRoaXMuc29ja2V0VXJsICsgJy8nCiAgICAgIC8vIH0KCiAgICAgIC8vIGh0dHDljY/orq7mlLnkuLp3cyAKICAgICAgbGV0IGJhc2VVcmwgPSBjb25maWcuYmFzZVVybC5yZXBsYWNlKC9eaHR0cC8sICd3cycpOwogICAgICB2YXIgdXJsID0gYCR7YmFzZVVybH13cz91c2VyX2lkPWAgKyB1c2VySWQgKyAnJnRvX2lkPScgKyB0b0lkOwogICAgICBpZiAodGhpcy53ZWJzb2NrID09IG51bGwpIHsKICAgICAgICB0aGlzLndlYnNvY2sgPSBuZXcgV2ViU29ja2V0KHVybCk7CiAgICAgICAgdGhpcy53ZWJzb2NrLm9ub3BlbiA9IHRoaXMud2Vic29ja2V0T25vcGVuOwogICAgICAgIHRoaXMud2Vic29jay5vbmVycm9yID0gdGhpcy53ZWJzb2NrZXRPbmVycm9yOwogICAgICAgIHRoaXMud2Vic29jay5vbm1lc3NhZ2UgPSB0aGlzLndlYnNvY2tldE9ubWVzc2FnZTsKICAgICAgICAvLyB0aGlzLndlYnNvY2sub25jbG9zZSA9IHRoaXMud2Vic29ja2V0T25jbG9zZTsKICAgICAgfQogICAgfSwKICAgIHdlYnNvY2tldE9ub3BlbjogZnVuY3Rpb24gKCkgewogICAgICAvLyBjb25zb2xlLmxvZygiV2ViU29ja2V06L+e5o6l5oiQ5YqfIik7CiAgICB9LAogICAgd2Vic29ja2V0T25lcnJvcjogZnVuY3Rpb24gKGUpIHsKICAgICAgLy8gY29uc29sZS5sb2coIldlYlNvY2tldOi/nuaOpeWPkeeUn+mUmeivryIpOwogICAgICB0aGlzLnJlY29ubmVjdCgpOwogICAgfSwKICAgIHdlYnNvY2tldE9uY2xvc2U6IGZ1bmN0aW9uIChlKSB7CiAgICAgIHRoaXMud2Vic29jay5jbG9zZSgxMDAwKTsKICAgICAgdGhpcy53ZWJzb2NrID0gbnVsbDsKICAgICAgLy8gY29uc29sZS5sb2coJ+WFs+mXreS6hicpCiAgICAgIC8vIHRoaXMucmVjb25uZWN0KCk7CiAgICB9LAogICAgd2Vic29ja2V0T25tZXNzYWdlOiBmdW5jdGlvbiAoZSkgewogICAgICAvLyBjb25zb2xlLmxvZygn5pS25Yiw5LqGJyxlKQogICAgfSwKICAgIHdlYnNvY2tldFNlbmQodGV4dCkgewogICAgICAvLyDmlbDmja7lj5HpgIEKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLndlYnNvY2suc2VuZCh0ZXh0KTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coInNlbmQgZmFpbGVkICgiICsgZXJyLmNvZGUgKyAiKSIpOwogICAgICB9CiAgICB9LAogICAgcmVjb25uZWN0KCkgewogICAgICAvLyB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIC8vIGlmICh0aGF0LmxvY2tSZWNvbm5lY3QpIHJldHVybjsKICAgICAgLy8gdGhhdC5sb2NrUmVjb25uZWN0ID0gdHJ1ZTsKICAgICAgLy8gLy/msqHov57mjqXkuIrkvJrkuIDnm7Tph43ov57vvIzorr7nva7lu7bov5/pgb/lhY3or7fmsYLov4flpJoKICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgLy8gCWNvbnNvbGUuaW5mbygi5bCd6K+V6YeN6L+eLi4uIik7CiAgICAgIC8vIAl0aGF0LmluaXRXZWJTb2NrZXQoKTsKICAgICAgLy8gCXRoYXQubG9ja1JlY29ubmVjdCA9IGZhbHNlOwogICAgICAvLyB9LCA1MDAwKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["store","Vue","config","WebsocketMixin","mounted","destroyed","methods","initWebSocket","toId","userId","localStorage","getItem","baseUrl","replace","url","websock","WebSocket","onopen","websocketOnopen","onerror","websocketOnerror","onmessage","websocketOnmessage","e","reconnect","websocketOnclose","close","websocketSend","text","send","err","console","log","code"],"sources":["D:/uu/springboot+vue的果蔬大棚管理系统/font/src/mixins/WebsocketMixin.js"],"sourcesContent":["import store from '@/store/'\r\n// import { ACCESS_TOKEN } from '@/store/mutation-types'\r\nimport Vue from 'vue'\r\nimport config from '@/config/config'\r\nexport const WebsocketMixin = {\r\n\tmounted() {\r\n\t\t// this.initWebSocket();\r\n\t},\r\n\tdestroyed: function() {\r\n\t\t// 离开页面生命周期函数\r\n\t\t// this.websocketOnclose();\r\n\t},\r\n\tmethods: {\r\n\t\tinitWebSocket(toId) {\r\n\t\t\t// let token = Vue.ls.get(localStorage.getItem('frontToken'))\r\n\t\t\t// console.log(\"------------WebSocket连接成功\");\r\n\t\t\t// WebSocket与普通的请求所用协议有所不同，ws等同于http，wss等同于https\r\n\t\t\tvar userId = localStorage.getItem('frontUserid')\r\n\t\t\t// if(!this.socketUrl.startsWith('/')){\r\n\t\t\t//   this.socketUrl = '/' + this.socketUrl\r\n\t\t\t// }\r\n\t\t\t// if(!this.socketUrl.endsWith('/')){\r\n\t\t\t//   this.socketUrl = this.socketUrl + '/'\r\n\t\t\t// }\r\n\r\n\t\t\t// http协议改为ws \r\n\t\t\tlet baseUrl = config.baseUrl.replace(/^http/,'ws') \r\n\r\n\t\t\tvar url = `${baseUrl}ws?user_id=` + userId + '&to_id=' + toId;\r\n\t\t\tif (this.websock == null) {\r\n\t\t\t\tthis.websock = new WebSocket(url);\r\n\t\t\t\tthis.websock.onopen = this.websocketOnopen;\r\n\t\t\t\tthis.websock.onerror = this.websocketOnerror;\r\n\t\t\t\tthis.websock.onmessage = this.websocketOnmessage;\r\n\t\t\t\t// this.websock.onclose = this.websocketOnclose;\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\twebsocketOnopen: function() {\r\n\t\t\t// console.log(\"WebSocket连接成功\");\r\n\t\t},\r\n\t\twebsocketOnerror: function(e) {\r\n\t\t\t// console.log(\"WebSocket连接发生错误\");\r\n\t\t\tthis.reconnect();\r\n\t\t},\r\n\t\twebsocketOnclose: function(e) {\r\n\t\t\tthis.websock.close(1000)\r\n\t\t\tthis.websock = null\r\n\t\t\t// console.log('关闭了')\r\n\t\t\t// this.reconnect();\r\n\t\t},\r\n\t\twebsocketOnmessage:function(e) {\r\n\t\t\t// console.log('收到了',e)\r\n\t\t},\r\n\t\twebsocketSend(text) {\r\n\t\t\t// 数据发送\r\n\t\t\ttry {\r\n\t\t\t\tthis.websock.send(text);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(\"send failed (\" + err.code + \")\");\r\n\t\t\t}\r\n\t\t},\r\n\t\treconnect() {\r\n\t\t\t// var that = this;\r\n\t\t\t// if (that.lockReconnect) return;\r\n\t\t\t// that.lockReconnect = true;\r\n\t\t\t// //没连接上会一直重连，设置延迟避免请求过多\r\n\t\t\t// setTimeout(function() {\r\n\t\t\t// \tconsole.info(\"尝试重连...\");\r\n\t\t\t// \tthat.initWebSocket();\r\n\t\t\t// \tthat.lockReconnect = false;\r\n\t\t\t// }, 5000);\r\n\t\t},\r\n\t}\r\n\r\n}"],"mappings":"AAAA,OAAOA,KAAK,MAAM,UAAU;AAC5B;AACA,OAAOC,GAAG,MAAM,KAAK;AACrB,OAAOC,MAAM,MAAM,iBAAiB;AACpC,OAAO,MAAMC,cAAc,GAAG;EAC7BC,OAAOA,CAAA,EAAG;IACT;EAAA,CACA;EACDC,SAAS,EAAE,SAAAA,CAAA,EAAW;IACrB;IACA;EAAA,CACA;EACDC,OAAO,EAAE;IACRC,aAAaA,CAACC,IAAI,EAAE;MACnB;MACA;MACA;MACA,IAAIC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;MAChD;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA,IAAIC,OAAO,GAAGV,MAAM,CAACU,OAAO,CAACC,OAAO,CAAC,OAAO,EAAC,IAAI,CAAC;MAElD,IAAIC,GAAG,GAAG,GAAGF,OAAO,aAAa,GAAGH,MAAM,GAAG,SAAS,GAAGD,IAAI;MAC7D,IAAI,IAAI,CAACO,OAAO,IAAI,IAAI,EAAE;QACzB,IAAI,CAACA,OAAO,GAAG,IAAIC,SAAS,CAACF,GAAG,CAAC;QACjC,IAAI,CAACC,OAAO,CAACE,MAAM,GAAG,IAAI,CAACC,eAAe;QAC1C,IAAI,CAACH,OAAO,CAACI,OAAO,GAAG,IAAI,CAACC,gBAAgB;QAC5C,IAAI,CAACL,OAAO,CAACM,SAAS,GAAG,IAAI,CAACC,kBAAkB;QAChD;MAED;IAED,CAAC;IACDJ,eAAe,EAAE,SAAAA,CAAA,EAAW;MAC3B;IAAA,CACA;IACDE,gBAAgB,EAAE,SAAAA,CAASG,CAAC,EAAE;MAC7B;MACA,IAAI,CAACC,SAAS,CAAC,CAAC;IACjB,CAAC;IACDC,gBAAgB,EAAE,SAAAA,CAASF,CAAC,EAAE;MAC7B,IAAI,CAACR,OAAO,CAACW,KAAK,CAAC,IAAI,CAAC;MACxB,IAAI,CAACX,OAAO,GAAG,IAAI;MACnB;MACA;IACD,CAAC;IACDO,kBAAkB,EAAC,SAAAA,CAASC,CAAC,EAAE;MAC9B;IAAA,CACA;IACDI,aAAaA,CAACC,IAAI,EAAE;MACnB;MACA,IAAI;QACH,IAAI,CAACb,OAAO,CAACc,IAAI,CAACD,IAAI,CAAC;MACxB,CAAC,CAAC,OAAOE,GAAG,EAAE;QACbC,OAAO,CAACC,GAAG,CAAC,eAAe,GAAGF,GAAG,CAACG,IAAI,GAAG,GAAG,CAAC;MAC9C;IACD,CAAC;IACDT,SAASA,CAAA,EAAG;MACX;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IAAA;EAEF;AAED,CAAC","ignoreList":[]}]}